"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/route";
exports.ids = ["app/api/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_user_Downloads_legendas_srt_ai_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/route.ts */ \"(rsc)/./app/api/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"export\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/route\",\n        pathname: \"/api\",\n        filename: \"route\",\n        bundlePath: \"app/api/route\"\n    },\n    resolvedPagePath: \"/Users/user/Downloads/legendas/srt-ai/app/api/route.ts\",\n    nextConfigOutput,\n    userland: _Users_user_Downloads_legendas_srt_ai_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnVzZXIlMkZEb3dubG9hZHMlMkZsZWdlbmRhcyUyRnNydC1haSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ1c2VyJTJGRG93bmxvYWRzJTJGbGVnZW5kYXMlMkZzcnQtYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9ZXhwb3J0JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTTtBQUNuRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3NydC8/ZTYzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdXNlci9Eb3dubG9hZHMvbGVnZW5kYXMvc3J0LWFpL2FwcC9hcGkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiZXhwb3J0XCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3VzZXIvRG93bmxvYWRzL2xlZ2VuZGFzL3NydC1haS9hcHAvYXBpL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/route.ts":
/*!**************************!*\
  !*** ./app/api/route.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/client */ \"(rsc)/./lib/client.ts\");\n/* harmony import */ var _lib_srt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/srt */ \"(rsc)/./lib/srt.ts\");\n/* harmony import */ var _ai_sdk_google__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ai-sdk/google */ \"(rsc)/./node_modules/@ai-sdk/google/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n\n\n\n\n// Removendo dynamic = \"force-dynamic\" para permitir exportação estática\n// export const dynamic = \"force-dynamic\";\nconst MAX_TOKENS_IN_SEGMENT = 700;\nconst retrieveTranslation = async (text, language)=>{\n    let retries = 3;\n    while(retries > 0){\n        try {\n            const { text: translatedText } = await (0,ai__WEBPACK_IMPORTED_MODULE_2__.generateText)({\n                model: (0,_ai_sdk_google__WEBPACK_IMPORTED_MODULE_3__.google)(\"gemini-2.0-flash-exp\"),\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"Voc\\xea \\xe9 um tradutor profissional especializado em legendas de filmes e s\\xe9ries, com foco especial em portugu\\xeas brasileiro. IMPORTANTE: Preserve cuidadosamente toda a formata\\xe7\\xe3o original, incluindo tags HTML como <i> para it\\xe1lico. Separe os segmentos de tradu\\xe7\\xe3o com o s\\xedmbolo '|'. Mantenha o estilo e tom da linguagem original. Nomes pr\\xf3prios n\\xe3o devem ser traduzidos. Preserve os nomes de programas como 'The Amazing Race'. MUITO IMPORTANTE: Quando o texto original contiver di\\xe1logos marcados por h\\xedfens (ex: '-Ol\\xe1. -Oi!'), mantenha cada linha de di\\xe1logo separada pela mesma estrutura, preservando os h\\xedfens e a formata\\xe7\\xe3o em linhas distintas. NUNCA junte m\\xfaltiplos di\\xe1logos em uma \\xfanica linha.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: `Traduza estas legendas para português brasileiro: ${text}`\n                    }\n                ]\n            });\n            return translatedText;\n        } catch (error) {\n            console.error(\"Translation error:\", error);\n            if (retries > 1) {\n                console.warn(\"Retrying translation...\");\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n                retries--;\n                continue;\n            }\n            throw error;\n        }\n    }\n};\nasync function POST(request) {\n    try {\n        const { content, language, apiKey } = await request.json();\n        // Verificar se a API key foi fornecida\n        if (!apiKey) {\n            return new Response(JSON.stringify({\n                error: \"API Key n\\xe3o fornecida. Por favor, adicione uma chave de API do Google Gemini.\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // Configurar a API key\n        process.env.GOOGLE_API_KEY = apiKey;\n        const segments = content.split(/\\r\\n\\r\\n|\\n\\n/).map(_lib_client__WEBPACK_IMPORTED_MODULE_0__.parseSegment);\n        const groups = (0,_lib_srt__WEBPACK_IMPORTED_MODULE_1__.groupSegmentsByTokenLength)(segments, MAX_TOKENS_IN_SEGMENT);\n        let currentIndex = 0;\n        const encoder = new TextEncoder();\n        const stream = new ReadableStream({\n            async start (controller) {\n                for (const group of groups){\n                    const text = group.map((segment)=>segment.text).join(\"|\");\n                    const translatedText = await retrieveTranslation(text, language);\n                    if (!translatedText) continue;\n                    const translatedSegments = translatedText.split(\"|\");\n                    for (const segment of translatedSegments){\n                        if (segment.trim()) {\n                            const originalSegment = segments[currentIndex];\n                            const srt = `${++currentIndex}\\n${originalSegment?.timestamp || \"\"}\\n${segment.trim()}\\n\\n`;\n                            controller.enqueue(encoder.encode(srt));\n                        }\n                    }\n                }\n                controller.close();\n            }\n        });\n        return new Response(stream);\n    } catch (error) {\n        console.error(\"Error during translation:\", error);\n        const errorMessage = error instanceof Error ? `Erro na tradução: ${error.message}` : \"Erro desconhecido durante a tradu\\xe7\\xe3o\";\n        return new Response(JSON.stringify({\n            error: errorMessage,\n            details: error instanceof Error ? error.stack : String(error)\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRDO0FBQ1c7QUFDZjtBQUNOO0FBRWxDLHdFQUF3RTtBQUN4RSwwQ0FBMEM7QUFFMUMsTUFBTUksd0JBQXdCO0FBRTlCLE1BQU1DLHNCQUFzQixPQUFPQyxNQUFjQztJQUNoRCxJQUFJQyxVQUFVO0lBQ2QsTUFBT0EsVUFBVSxFQUFHO1FBQ25CLElBQUk7WUFDSCxNQUFNLEVBQUVGLE1BQU1HLGNBQWMsRUFBRSxHQUFHLE1BQU1OLGdEQUFZQSxDQUFDO2dCQUNuRE8sT0FBT1Isc0RBQU1BLENBQUM7Z0JBQ2RTLFVBQVU7b0JBQ1Q7d0JBQ0NDLE1BQU07d0JBQ05DLFNBQ0M7b0JBQ0Y7b0JBQ0E7d0JBQ0NELE1BQU07d0JBQ05DLFNBQVMsQ0FBQyxrREFBa0QsRUFBRVAsS0FBSyxDQUFDO29CQUNyRTtpQkFDQTtZQUNGO1lBRUEsT0FBT0c7UUFDUixFQUFFLE9BQU9LLE9BQU87WUFDZkMsUUFBUUQsS0FBSyxDQUFDLHNCQUFzQkE7WUFDcEMsSUFBSU4sVUFBVSxHQUFHO2dCQUNoQk8sUUFBUUMsSUFBSSxDQUFDO2dCQUNiLE1BQU0sSUFBSUMsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTO2dCQUNuRFY7Z0JBQ0E7WUFDRDtZQUNBLE1BQU1NO1FBQ1A7SUFDRDtBQUNEO0FBRU8sZUFBZU0sS0FBS0MsT0FBZ0I7SUFDMUMsSUFBSTtRQUNILE1BQU0sRUFBRVIsT0FBTyxFQUFFTixRQUFRLEVBQUVlLE1BQU0sRUFBRSxHQUFHLE1BQU1ELFFBQVFFLElBQUk7UUFFeEQsdUNBQXVDO1FBQ3ZDLElBQUksQ0FBQ0QsUUFBUTtZQUNaLE9BQU8sSUFBSUUsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO2dCQUFFWixPQUFPO1lBQWdGLElBQUk7Z0JBQy9IYSxRQUFRO2dCQUNSQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDL0M7UUFDRDtRQUVBLHVCQUF1QjtRQUN2QkMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEdBQUdUO1FBRTdCLE1BQU1VLFdBQVduQixRQUFRb0IsS0FBSyxDQUFDLGlCQUFpQkMsR0FBRyxDQUFDbEMscURBQVlBO1FBQ2hFLE1BQU1tQyxTQUFTbEMsb0VBQTBCQSxDQUFDK0IsVUFBVTVCO1FBRXBELElBQUlnQyxlQUFlO1FBQ25CLE1BQU1DLFVBQVUsSUFBSUM7UUFFcEIsTUFBTUMsU0FBUyxJQUFJQyxlQUFlO1lBQ2pDLE1BQU1DLE9BQU1DLFVBQVU7Z0JBQ3JCLEtBQUssTUFBTUMsU0FBU1IsT0FBUTtvQkFDM0IsTUFBTTdCLE9BQU9xQyxNQUFNVCxHQUFHLENBQUMsQ0FBQ1UsVUFBWUEsUUFBUXRDLElBQUksRUFBRXVDLElBQUksQ0FBQztvQkFDdkQsTUFBTXBDLGlCQUFpQixNQUFNSixvQkFBb0JDLE1BQU1DO29CQUN2RCxJQUFJLENBQUNFLGdCQUFnQjtvQkFFckIsTUFBTXFDLHFCQUFxQnJDLGVBQWV3QixLQUFLLENBQUM7b0JBQ2hELEtBQUssTUFBTVcsV0FBV0UsbUJBQW9CO3dCQUN6QyxJQUFJRixRQUFRRyxJQUFJLElBQUk7NEJBQ25CLE1BQU1DLGtCQUFrQmhCLFFBQVEsQ0FBQ0ksYUFBYTs0QkFDOUMsTUFBTWEsTUFBTSxDQUFDLEVBQUUsRUFBRWIsYUFBYSxFQUFFLEVBQUVZLGlCQUFpQkUsYUFBYSxHQUFHLEVBQUUsRUFBRU4sUUFBUUcsSUFBSSxHQUFHLElBQUksQ0FBQzs0QkFDM0ZMLFdBQVdTLE9BQU8sQ0FBQ2QsUUFBUWUsTUFBTSxDQUFDSDt3QkFDbkM7b0JBQ0Q7Z0JBQ0Q7Z0JBQ0FQLFdBQVdXLEtBQUs7WUFDakI7UUFDRDtRQUVBLE9BQU8sSUFBSTdCLFNBQVNlO0lBQ3JCLEVBQUUsT0FBT3pCLE9BQU87UUFDZkMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsTUFBTXdDLGVBQWV4QyxpQkFBaUJ5QyxRQUNuQyxDQUFDLGtCQUFrQixFQUFFekMsTUFBTTBDLE9BQU8sQ0FBQyxDQUFDLEdBQ3BDO1FBRUgsT0FBTyxJQUFJaEMsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1lBQ2xDWixPQUFPd0M7WUFDUEcsU0FBUzNDLGlCQUFpQnlDLFFBQVF6QyxNQUFNNEMsS0FBSyxHQUFHQyxPQUFPN0M7UUFDeEQsSUFBSTtZQUNIYSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1FBQy9DO0lBQ0Q7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NydC8uL2FwcC9hcGkvcm91dGUudHM/MTQ0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVNlZ21lbnQgfSBmcm9tIFwiQC9saWIvY2xpZW50XCI7XG5pbXBvcnQgeyBncm91cFNlZ21lbnRzQnlUb2tlbkxlbmd0aCB9IGZyb20gXCJAL2xpYi9zcnRcIjtcbmltcG9ydCB7IGdvb2dsZSB9IGZyb20gXCJAYWktc2RrL2dvb2dsZVwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUZXh0IH0gZnJvbSBcImFpXCI7XG5cbi8vIFJlbW92ZW5kbyBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCIgcGFyYSBwZXJtaXRpciBleHBvcnRhw6fDo28gZXN0w6F0aWNhXG4vLyBleHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xuXG5jb25zdCBNQVhfVE9LRU5TX0lOX1NFR01FTlQgPSA3MDA7XG5cbmNvbnN0IHJldHJpZXZlVHJhbnNsYXRpb24gPSBhc3luYyAodGV4dDogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nKSA9PiB7XG5cdGxldCByZXRyaWVzID0gMztcblx0d2hpbGUgKHJldHJpZXMgPiAwKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHsgdGV4dDogdHJhbnNsYXRlZFRleHQgfSA9IGF3YWl0IGdlbmVyYXRlVGV4dCh7XG5cdFx0XHRcdG1vZGVsOiBnb29nbGUoXCJnZW1pbmktMi4wLWZsYXNoLWV4cFwiKSxcblx0XHRcdFx0bWVzc2FnZXM6IFtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyb2xlOiBcInN5c3RlbVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDpcblx0XHRcdFx0XHRcdFx0XCJWb2PDqiDDqSB1bSB0cmFkdXRvciBwcm9maXNzaW9uYWwgZXNwZWNpYWxpemFkbyBlbSBsZWdlbmRhcyBkZSBmaWxtZXMgZSBzw6lyaWVzLCBjb20gZm9jbyBlc3BlY2lhbCBlbSBwb3J0dWd1w6pzIGJyYXNpbGVpcm8uIElNUE9SVEFOVEU6IFByZXNlcnZlIGN1aWRhZG9zYW1lbnRlIHRvZGEgYSBmb3JtYXRhw6fDo28gb3JpZ2luYWwsIGluY2x1aW5kbyB0YWdzIEhUTUwgY29tbyA8aT4gcGFyYSBpdMOhbGljby4gU2VwYXJlIG9zIHNlZ21lbnRvcyBkZSB0cmFkdcOnw6NvIGNvbSBvIHPDrW1ib2xvICd8Jy4gTWFudGVuaGEgbyBlc3RpbG8gZSB0b20gZGEgbGluZ3VhZ2VtIG9yaWdpbmFsLiBOb21lcyBwcsOzcHJpb3MgbsOjbyBkZXZlbSBzZXIgdHJhZHV6aWRvcy4gUHJlc2VydmUgb3Mgbm9tZXMgZGUgcHJvZ3JhbWFzIGNvbW8gJ1RoZSBBbWF6aW5nIFJhY2UnLiBNVUlUTyBJTVBPUlRBTlRFOiBRdWFuZG8gbyB0ZXh0byBvcmlnaW5hbCBjb250aXZlciBkacOhbG9nb3MgbWFyY2Fkb3MgcG9yIGjDrWZlbnMgKGV4OiAnLU9sw6EuIC1PaSEnKSwgbWFudGVuaGEgY2FkYSBsaW5oYSBkZSBkacOhbG9nbyBzZXBhcmFkYSBwZWxhIG1lc21hIGVzdHJ1dHVyYSwgcHJlc2VydmFuZG8gb3MgaMOtZmVucyBlIGEgZm9ybWF0YcOnw6NvIGVtIGxpbmhhcyBkaXN0aW50YXMuIE5VTkNBIGp1bnRlIG3Dumx0aXBsb3MgZGnDoWxvZ29zIGVtIHVtYSDDum5pY2EgbGluaGEuXCIsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRyb2xlOiBcInVzZXJcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IGBUcmFkdXphIGVzdGFzIGxlZ2VuZGFzIHBhcmEgcG9ydHVndcOqcyBicmFzaWxlaXJvOiAke3RleHR9YCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRdLFxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiB0cmFuc2xhdGVkVGV4dDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIlRyYW5zbGF0aW9uIGVycm9yOlwiLCBlcnJvcik7XG5cdFx0XHRpZiAocmV0cmllcyA+IDEpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiUmV0cnlpbmcgdHJhbnNsYXRpb24uLi5cIik7XG5cdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcblx0XHRcdFx0cmV0cmllcy0tO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgY29udGVudCwgbGFuZ3VhZ2UsIGFwaUtleSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cdFx0XG5cdFx0Ly8gVmVyaWZpY2FyIHNlIGEgQVBJIGtleSBmb2kgZm9ybmVjaWRhXG5cdFx0aWYgKCFhcGlLZXkpIHtcblx0XHRcdHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogXCJBUEkgS2V5IG7Do28gZm9ybmVjaWRhLiBQb3IgZmF2b3IsIGFkaWNpb25lIHVtYSBjaGF2ZSBkZSBBUEkgZG8gR29vZ2xlIEdlbWluaS5cIiB9KSwge1xuXHRcdFx0XHRzdGF0dXM6IDQwMCxcblx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQ29uZmlndXJhciBhIEFQSSBrZXlcblx0XHRwcm9jZXNzLmVudi5HT09HTEVfQVBJX0tFWSA9IGFwaUtleTtcblx0XHRcblx0XHRjb25zdCBzZWdtZW50cyA9IGNvbnRlbnQuc3BsaXQoL1xcclxcblxcclxcbnxcXG5cXG4vKS5tYXAocGFyc2VTZWdtZW50KTtcblx0XHRjb25zdCBncm91cHMgPSBncm91cFNlZ21lbnRzQnlUb2tlbkxlbmd0aChzZWdtZW50cywgTUFYX1RPS0VOU19JTl9TRUdNRU5UKTtcblxuXHRcdGxldCBjdXJyZW50SW5kZXggPSAwO1xuXHRcdGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblxuXHRcdGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG5cdFx0XHRhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZ3JvdXAgb2YgZ3JvdXBzKSB7XG5cdFx0XHRcdFx0Y29uc3QgdGV4dCA9IGdyb3VwLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC50ZXh0KS5qb2luKFwifFwiKTtcblx0XHRcdFx0XHRjb25zdCB0cmFuc2xhdGVkVGV4dCA9IGF3YWl0IHJldHJpZXZlVHJhbnNsYXRpb24odGV4dCwgbGFuZ3VhZ2UpO1xuXHRcdFx0XHRcdGlmICghdHJhbnNsYXRlZFRleHQpIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0Y29uc3QgdHJhbnNsYXRlZFNlZ21lbnRzID0gdHJhbnNsYXRlZFRleHQuc3BsaXQoXCJ8XCIpO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiB0cmFuc2xhdGVkU2VnbWVudHMpIHtcblx0XHRcdFx0XHRcdGlmIChzZWdtZW50LnRyaW0oKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbFNlZ21lbnQgPSBzZWdtZW50c1tjdXJyZW50SW5kZXhdO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzcnQgPSBgJHsrK2N1cnJlbnRJbmRleH1cXG4ke29yaWdpbmFsU2VnbWVudD8udGltZXN0YW1wIHx8IFwiXCJ9XFxuJHtzZWdtZW50LnRyaW0oKX1cXG5cXG5gO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoc3J0KSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKHN0cmVhbSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyB0cmFuc2xhdGlvbjpcIiwgZXJyb3IpO1xuXHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgXG5cdFx0XHQ/IGBFcnJvIG5hIHRyYWR1w6fDo286ICR7ZXJyb3IubWVzc2FnZX1gIFxuXHRcdFx0OiBcIkVycm8gZGVzY29uaGVjaWRvIGR1cmFudGUgYSB0cmFkdcOnw6NvXCI7XG5cdFx0XG5cdFx0cmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IFxuXHRcdFx0ZXJyb3I6IGVycm9yTWVzc2FnZSxcblx0XHRcdGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IFN0cmluZyhlcnJvcilcblx0XHR9KSwge1xuXHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cblx0XHR9KTtcblx0fVxufVxuIl0sIm5hbWVzIjpbInBhcnNlU2VnbWVudCIsImdyb3VwU2VnbWVudHNCeVRva2VuTGVuZ3RoIiwiZ29vZ2xlIiwiZ2VuZXJhdGVUZXh0IiwiTUFYX1RPS0VOU19JTl9TRUdNRU5UIiwicmV0cmlldmVUcmFuc2xhdGlvbiIsInRleHQiLCJsYW5ndWFnZSIsInJldHJpZXMiLCJ0cmFuc2xhdGVkVGV4dCIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJQT1NUIiwicmVxdWVzdCIsImFwaUtleSIsImpzb24iLCJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGF0dXMiLCJoZWFkZXJzIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9BUElfS0VZIiwic2VnbWVudHMiLCJzcGxpdCIsIm1hcCIsImdyb3VwcyIsImN1cnJlbnRJbmRleCIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsInN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwiZ3JvdXAiLCJzZWdtZW50Iiwiam9pbiIsInRyYW5zbGF0ZWRTZWdtZW50cyIsInRyaW0iLCJvcmlnaW5hbFNlZ21lbnQiLCJzcnQiLCJ0aW1lc3RhbXAiLCJlbnF1ZXVlIiwiZW5jb2RlIiwiY2xvc2UiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwic3RhY2siLCJTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/client.ts":
/*!***********************!*\
  !*** ./lib/client.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseSegment: () => (/* binding */ parseSegment),\n/* harmony export */   parseTimestamp: () => (/* binding */ parseTimestamp)\n/* harmony export */ });\nfunction parseSegment(text) {\n    const [id, timestamp, ...lines] = text.split(/\\r\\n|\\n/);\n    return {\n        id: parseInt(id),\n        timestamp,\n        text: lines.join(\" \")\n    };\n}\nfunction parseTimestamp(timestamps) {\n    const [start, end] = timestamps.split(\" --> \");\n    return {\n        start,\n        end\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRU8sU0FBU0EsYUFBYUMsSUFBWTtJQUN2QyxNQUFNLENBQUNDLElBQUlDLFdBQVcsR0FBR0MsTUFBTSxHQUFHSCxLQUFLSSxLQUFLLENBQUM7SUFDN0MsT0FBTztRQUNMSCxJQUFJSSxTQUFTSjtRQUNiQztRQUNBRixNQUFNRyxNQUFNRyxJQUFJLENBQUM7SUFDbkI7QUFDRjtBQUVPLFNBQVNDLGVBQWVDLFVBQWtCO0lBQy9DLE1BQU0sQ0FBQ0MsT0FBT0MsSUFBSSxHQUFHRixXQUFXSixLQUFLLENBQUM7SUFDdEMsT0FBTztRQUFFSztRQUFPQztJQUFJO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3J0Ly4vbGliL2NsaWVudC50cz8xNTVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlZ21lbnQgfSBmcm9tIFwiQC90eXBlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZWdtZW50KHRleHQ6IHN0cmluZyk6IFNlZ21lbnQge1xuICBjb25zdCBbaWQsIHRpbWVzdGFtcCwgLi4ubGluZXNdID0gdGV4dC5zcGxpdCgvXFxyXFxufFxcbi8pO1xuICByZXR1cm4ge1xuICAgIGlkOiBwYXJzZUludChpZCksXG4gICAgdGltZXN0YW1wLFxuICAgIHRleHQ6IGxpbmVzLmpvaW4oXCIgXCIpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaW1lc3RhbXAodGltZXN0YW1wczogc3RyaW5nKSB7XG4gIGNvbnN0IFtzdGFydCwgZW5kXSA9IHRpbWVzdGFtcHMuc3BsaXQoXCIgLS0+IFwiKTtcbiAgcmV0dXJuIHsgc3RhcnQsIGVuZCB9XG59Il0sIm5hbWVzIjpbInBhcnNlU2VnbWVudCIsInRleHQiLCJpZCIsInRpbWVzdGFtcCIsImxpbmVzIiwic3BsaXQiLCJwYXJzZUludCIsImpvaW4iLCJwYXJzZVRpbWVzdGFtcCIsInRpbWVzdGFtcHMiLCJzdGFydCIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/srt.ts":
/*!********************!*\
  !*** ./lib/srt.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupSegmentsByTokenLength: () => (/* binding */ groupSegmentsByTokenLength),\n/* harmony export */   parseStreamedResponse: () => (/* binding */ parseStreamedResponse)\n/* harmony export */ });\n/* harmony import */ var eventsource_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! eventsource-parser */ \"(rsc)/./node_modules/eventsource-parser/dist/index.js\");\n/* harmony import */ var tiktoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tiktoken */ \"(rsc)/./node_modules/tiktoken/tiktoken.cjs\");\n\n\n/**\n * Groups segments into groups of length `length` or less.\n */ function groupSegmentsByTokenLength(segments, length) {\n    const groups = [];\n    let currentGroup = [];\n    let currentGroupTokenCount = 0;\n    const encoder = (0,tiktoken__WEBPACK_IMPORTED_MODULE_0__.encoding_for_model)(\"gpt-4o-mini\");\n    function numTokens(text) {\n        const tokens = encoder.encode(text);\n        return tokens.length;\n    }\n    for (const segment of segments){\n        const segmentTokenCount = numTokens(segment.text);\n        if (currentGroupTokenCount + segmentTokenCount <= length) {\n            currentGroup.push(segment);\n            currentGroupTokenCount += segmentTokenCount + 1; // include size of the \"|\" delimeter\n        } else {\n            groups.push(currentGroup);\n            currentGroup = [\n                segment\n            ];\n            currentGroupTokenCount = segmentTokenCount;\n        }\n    }\n    if (currentGroup.length > 0) {\n        groups.push(currentGroup);\n    }\n    encoder.free(); // clear encoder from memory\n    return groups;\n}\nfunction parseStreamedResponse(response) {\n    const encoder = new TextEncoder();\n    const decoder = new TextDecoder();\n    let buffer = \"\";\n    return new ReadableStream({\n        async start (controller) {\n            const onParse = (event)=>{\n                if (event.type !== \"event\") return;\n                const data = event.data;\n                if (data === \"[DONE]\") {\n                    controller.close();\n                    return;\n                }\n                try {\n                    // Log the raw data received from OpenAI\n                    console.log(\"Raw data received:\", data);\n                    const json = JSON.parse(data);\n                    console.log(\"Parsed JSON:\", json); // Log parsed JSON\n                    const text = json.choices[0]?.delta?.content;\n                    if (!text) return;\n                    buffer += text;\n                    // If there's a \"|\" in the buffer, we can enqueue a segment\n                    if (buffer.includes(\"|\")) {\n                        const segments = buffer.split(\"|\");\n                        for (const segment of segments.slice(0, -1)){\n                            controller.enqueue(encoder.encode(segment));\n                        }\n                        buffer = segments[segments.length - 1]; // Keep the remaining text\n                    }\n                } catch (e) {\n                    console.error(\"Error parsing response:\", e); // Log errors during parsing\n                    controller.error(e);\n                }\n            };\n            const parser = (0,eventsource_parser__WEBPACK_IMPORTED_MODULE_1__.createParser)(onParse);\n            for await (const chunk of response.body){\n                const decodedChunk = decoder.decode(chunk);\n                console.log(\"Raw chunk received:\", decodedChunk); // Log each raw chunk received\n                parser.feed(decodedChunk); // Feed the chunk into the parser\n            }\n            // Process any remaining buffer content\n            if (buffer.length > 0) {\n                console.log(\"Final buffer content:\", buffer); // Log any final buffer content\n                controller.enqueue(encoder.encode(buffer));\n            }\n            controller.close();\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QStCO2dCQUM3RUcsV0FBV2lCLE9BQU8sQ0FBQ2xDLFFBQVFJLE1BQU0sQ0FBQ1U7WUFDbkM7WUFFQUcsV0FBV0ssS0FBSztRQUNqQjtJQUNEO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcnQvLi9saWIvc3J0LnRzPzI2YjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBTZWdtZW50IH0gZnJvbSBcIkAvdHlwZXNcIjtcbmltcG9ydCB7XG5cdHR5cGUgUGFyc2VkRXZlbnQsXG5cdHR5cGUgUmVjb25uZWN0SW50ZXJ2YWwsXG5cdGNyZWF0ZVBhcnNlcixcbn0gZnJvbSBcImV2ZW50c291cmNlLXBhcnNlclwiO1xuaW1wb3J0IHsgZW5jb2RpbmdfZm9yX21vZGVsIH0gZnJvbSBcInRpa3Rva2VuXCI7XG5cbi8qKlxuICogR3JvdXBzIHNlZ21lbnRzIGludG8gZ3JvdXBzIG9mIGxlbmd0aCBgbGVuZ3RoYCBvciBsZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBTZWdtZW50c0J5VG9rZW5MZW5ndGgoXG5cdHNlZ21lbnRzOiBTZWdtZW50W10sXG5cdGxlbmd0aDogbnVtYmVyLFxuKSB7XG5cdGNvbnN0IGdyb3VwczogU2VnbWVudFtdW10gPSBbXTtcblx0bGV0IGN1cnJlbnRHcm91cDogU2VnbWVudFtdID0gW107XG5cdGxldCBjdXJyZW50R3JvdXBUb2tlbkNvdW50ID0gMDtcblx0Y29uc3QgZW5jb2RlciA9IGVuY29kaW5nX2Zvcl9tb2RlbChcImdwdC00by1taW5pXCIpO1xuXG5cdGZ1bmN0aW9uIG51bVRva2Vucyh0ZXh0OiBzdHJpbmcpIHtcblx0XHRjb25zdCB0b2tlbnMgPSBlbmNvZGVyLmVuY29kZSh0ZXh0KTtcblx0XHRyZXR1cm4gdG9rZW5zLmxlbmd0aDtcblx0fVxuXG5cdGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuXHRcdGNvbnN0IHNlZ21lbnRUb2tlbkNvdW50ID0gbnVtVG9rZW5zKHNlZ21lbnQudGV4dCk7XG5cblx0XHRpZiAoY3VycmVudEdyb3VwVG9rZW5Db3VudCArIHNlZ21lbnRUb2tlbkNvdW50IDw9IGxlbmd0aCkge1xuXHRcdFx0Y3VycmVudEdyb3VwLnB1c2goc2VnbWVudCk7XG5cdFx0XHRjdXJyZW50R3JvdXBUb2tlbkNvdW50ICs9IHNlZ21lbnRUb2tlbkNvdW50ICsgMTsgLy8gaW5jbHVkZSBzaXplIG9mIHRoZSBcInxcIiBkZWxpbWV0ZXJcblx0XHR9IGVsc2Uge1xuXHRcdFx0Z3JvdXBzLnB1c2goY3VycmVudEdyb3VwKTtcblx0XHRcdGN1cnJlbnRHcm91cCA9IFtzZWdtZW50XTtcblx0XHRcdGN1cnJlbnRHcm91cFRva2VuQ291bnQgPSBzZWdtZW50VG9rZW5Db3VudDtcblx0XHR9XG5cdH1cblxuXHRpZiAoY3VycmVudEdyb3VwLmxlbmd0aCA+IDApIHtcblx0XHRncm91cHMucHVzaChjdXJyZW50R3JvdXApO1xuXHR9XG5cblx0ZW5jb2Rlci5mcmVlKCk7IC8vIGNsZWFyIGVuY29kZXIgZnJvbSBtZW1vcnlcblx0cmV0dXJuIGdyb3Vwcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3RyZWFtZWRSZXNwb25zZShyZXNwb25zZTogYW55KTogUmVhZGFibGVTdHJlYW0ge1xuXHRjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cdGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcblx0bGV0IGJ1ZmZlciA9IFwiXCI7XG5cblx0cmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG5cdFx0YXN5bmMgc3RhcnQoY29udHJvbGxlcikge1xuXHRcdFx0Y29uc3Qgb25QYXJzZSA9IChldmVudDogUGFyc2VkRXZlbnQgfCBSZWNvbm5lY3RJbnRlcnZhbCkgPT4ge1xuXHRcdFx0XHRpZiAoZXZlbnQudHlwZSAhPT0gXCJldmVudFwiKSByZXR1cm47XG5cblx0XHRcdFx0Y29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG5cblx0XHRcdFx0aWYgKGRhdGEgPT09IFwiW0RPTkVdXCIpIHtcblx0XHRcdFx0XHRjb250cm9sbGVyLmNsb3NlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBMb2cgdGhlIHJhdyBkYXRhIHJlY2VpdmVkIGZyb20gT3BlbkFJXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJSYXcgZGF0YSByZWNlaXZlZDpcIiwgZGF0YSk7XG5cblx0XHRcdFx0XHRjb25zdCBqc29uID0gSlNPTi5wYXJzZShkYXRhKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBhcnNlZCBKU09OOlwiLCBqc29uKTsgLy8gTG9nIHBhcnNlZCBKU09OXG5cblx0XHRcdFx0XHRjb25zdCB0ZXh0ID0ganNvbi5jaG9pY2VzWzBdPy5kZWx0YT8uY29udGVudDtcblx0XHRcdFx0XHRpZiAoIXRleHQpIHJldHVybjtcblx0XHRcdFx0XHRidWZmZXIgKz0gdGV4dDtcblxuXHRcdFx0XHRcdC8vIElmIHRoZXJlJ3MgYSBcInxcIiBpbiB0aGUgYnVmZmVyLCB3ZSBjYW4gZW5xdWV1ZSBhIHNlZ21lbnRcblx0XHRcdFx0XHRpZiAoYnVmZmVyLmluY2x1ZGVzKFwifFwiKSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2VnbWVudHMgPSBidWZmZXIuc3BsaXQoXCJ8XCIpO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzLnNsaWNlKDAsIC0xKSkge1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoc2VnbWVudCkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnVmZmVyID0gc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0gMV07IC8vIEtlZXAgdGhlIHJlbWFpbmluZyB0ZXh0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgcmVzcG9uc2U6XCIsIGUpOyAvLyBMb2cgZXJyb3JzIGR1cmluZyBwYXJzaW5nXG5cdFx0XHRcdFx0Y29udHJvbGxlci5lcnJvcihlKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgcGFyc2VyID0gY3JlYXRlUGFyc2VyKG9uUGFyc2UpO1xuXG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlc3BvbnNlLmJvZHkgYXMgYW55KSB7XG5cdFx0XHRcdGNvbnN0IGRlY29kZWRDaHVuayA9IGRlY29kZXIuZGVjb2RlKGNodW5rKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSYXcgY2h1bmsgcmVjZWl2ZWQ6XCIsIGRlY29kZWRDaHVuayk7IC8vIExvZyBlYWNoIHJhdyBjaHVuayByZWNlaXZlZFxuXHRcdFx0XHRwYXJzZXIuZmVlZChkZWNvZGVkQ2h1bmspOyAvLyBGZWVkIHRoZSBjaHVuayBpbnRvIHRoZSBwYXJzZXJcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJvY2VzcyBhbnkgcmVtYWluaW5nIGJ1ZmZlciBjb250ZW50XG5cdFx0XHRpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJGaW5hbCBidWZmZXIgY29udGVudDpcIiwgYnVmZmVyKTsgLy8gTG9nIGFueSBmaW5hbCBidWZmZXIgY29udGVudFxuXHRcdFx0XHRjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYnVmZmVyKSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHR9LFxuXHR9KTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVQYXJzZXIiLCJlbmNvZGluZ19mb3JfbW9kZWwiLCJncm91cFNlZ21lbnRzQnlUb2tlbkxlbmd0aCIsInNlZ21lbnRzIiwibGVuZ3RoIiwiZ3JvdXBzIiwiY3VycmVudEdyb3VwIiwiY3VycmVudEdyb3VwVG9rZW5Db3VudCIsImVuY29kZXIiLCJudW1Ub2tlbnMiLCJ0ZXh0IiwidG9rZW5zIiwiZW5jb2RlIiwic2VnbWVudCIsInNlZ21lbnRUb2tlbkNvdW50IiwicHVzaCIsImZyZWUiLCJwYXJzZVN0cmVhbWVkUmVzcG9uc2UiLCJyZXNwb25zZSIsIlRleHRFbmNvZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJvblBhcnNlIiwiZXZlbnQiLCJ0eXBlIiwiZGF0YSIsImNsb3NlIiwiY29uc29sZSIsImxvZyIsImpzb24iLCJKU09OIiwicGFyc2UiLCJjaG9pY2VzIiwiZGVsdGEiLCJjb250ZW50IiwiaW5jbHVkZXMiLCJzcGxpdCIsInNsaWNlIiwiZW5xdWV1ZSIsImUiLCJlcnJvciIsInBhcnNlciIsImNodW5rIiwiYm9keSIsImRlY29kZWRDaHVuayIsImRlY29kZSIsImZlZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/srt.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod-to-json-schema","vendor-chunks/@ai-sdk","vendor-chunks/tiktoken","vendor-chunks/zod","vendor-chunks/nanoid","vendor-chunks/eventsource-parser","vendor-chunks/ai","vendor-chunks/secure-json-parse"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDownloads%2Flegendas%2Fsrt-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();