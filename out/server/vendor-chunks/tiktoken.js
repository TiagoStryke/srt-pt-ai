/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/tiktoken";
exports.ids = ["vendor-chunks/tiktoken"];
exports.modules = {

/***/ "(rsc)/./node_modules/tiktoken/tiktoken.cjs":
/*!********************************************!*\
  !*** ./node_modules/tiktoken/tiktoken.cjs ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("const wasm = __webpack_require__(/*! ./tiktoken_bg.cjs */ \"(rsc)/./node_modules/tiktoken/tiktoken_bg.cjs\");\nlet imports = {};\nimports[\"./tiktoken_bg.js\"] = wasm;\nconst path = __webpack_require__(/*! path */ \"path\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst candidates = __dirname.split(path.sep).reduce((memo, _, index, array)=>{\n    const prefix = array.slice(0, index + 1).join(path.sep) + path.sep;\n    if (!prefix.includes(\"node_modules\" + path.sep)) {\n        memo.unshift(path.join(prefix, \"node_modules\", \"tiktoken\", \"\", \"./tiktoken_bg.wasm\"));\n    }\n    return memo;\n}, []);\ncandidates.unshift(path.join(__dirname, \"./tiktoken_bg.wasm\"));\nlet bytes = null;\nfor (const candidate of candidates){\n    try {\n        bytes = fs.readFileSync(candidate);\n        break;\n    } catch  {}\n}\nif (bytes == null) throw new Error(\"Missing tiktoken_bg.wasm\");\nconst wasmModule = new WebAssembly.Module(bytes);\nconst wasmInstance = new WebAssembly.Instance(wasmModule, imports);\nwasm.__wbg_set_wasm(wasmInstance.exports);\nexports.get_encoding = wasm[\"get_encoding\"];\nexports.encoding_for_model = wasm[\"encoding_for_model\"];\nexports.Tiktoken = wasm[\"Tiktoken\"];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdGlrdG9rZW4vdGlrdG9rZW4uY2pzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU9DLG1CQUFPQSxDQUFDLHdFQUFtQjtBQUN4QyxJQUFJQyxVQUFVLENBQUM7QUFDZkEsT0FBTyxDQUFDLG1CQUFtQixHQUFHRjtBQUM5QixNQUFNRyxPQUFPRixtQkFBT0EsQ0FBQyxrQkFBTTtBQUMzQixNQUFNRyxLQUFLSCxtQkFBT0EsQ0FBQyxjQUFJO0FBRXZCLE1BQU1JLGFBQWFDLFVBQ2hCQyxLQUFLLENBQUNKLEtBQUtLLEdBQUcsRUFDZEMsTUFBTSxDQUFDLENBQUNDLE1BQU1DLEdBQUdDLE9BQU9DO0lBQ3ZCLE1BQU1DLFNBQVNELE1BQU1FLEtBQUssQ0FBQyxHQUFHSCxRQUFRLEdBQUdJLElBQUksQ0FBQ2IsS0FBS0ssR0FBRyxJQUFJTCxLQUFLSyxHQUFHO0lBQ2xFLElBQUksQ0FBQ00sT0FBT0csUUFBUSxDQUFDLGlCQUFpQmQsS0FBS0ssR0FBRyxHQUFHO1FBQy9DRSxLQUFLUSxPQUFPLENBQ1ZmLEtBQUthLElBQUksQ0FDUEYsUUFDQSxnQkFDQSxZQUNBLElBQ0E7SUFHTjtJQUNBLE9BQU9KO0FBQ1QsR0FBRyxFQUFFO0FBQ1BMLFdBQVdhLE9BQU8sQ0FBQ2YsS0FBS2EsSUFBSSxDQUFDVixXQUFXO0FBRXhDLElBQUlhLFFBQVE7QUFDWixLQUFLLE1BQU1DLGFBQWFmLFdBQVk7SUFDbEMsSUFBSTtRQUNGYyxRQUFRZixHQUFHaUIsWUFBWSxDQUFDRDtRQUN4QjtJQUNGLEVBQUUsT0FBTSxDQUFDO0FBQ1g7QUFFQSxJQUFJRCxTQUFTLE1BQU0sTUFBTSxJQUFJRyxNQUFNO0FBQ25DLE1BQU1DLGFBQWEsSUFBSUMsWUFBWUMsTUFBTSxDQUFDTjtBQUMxQyxNQUFNTyxlQUFlLElBQUlGLFlBQVlHLFFBQVEsQ0FBQ0osWUFBWXJCO0FBQzFERixLQUFLNEIsY0FBYyxDQUFDRixhQUFhRyxPQUFPO0FBQ3hDQSxvQkFBdUIsR0FBRzdCLElBQUksQ0FBQyxlQUFlO0FBQzlDNkIsMEJBQTZCLEdBQUc3QixJQUFJLENBQUMscUJBQXFCO0FBQzFENkIsZ0JBQW1CLEdBQUc3QixJQUFJLENBQUMsV0FBVyIsInNvdXJjZXMiOlsid2VicGFjazovL3NydC8uL25vZGVfbW9kdWxlcy90aWt0b2tlbi90aWt0b2tlbi5janM/NGY0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3YXNtID0gcmVxdWlyZShcIi4vdGlrdG9rZW5fYmcuY2pzXCIpO1xubGV0IGltcG9ydHMgPSB7fTtcbmltcG9ydHNbXCIuL3Rpa3Rva2VuX2JnLmpzXCJdID0gd2FzbTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jb25zdCBjYW5kaWRhdGVzID0gX19kaXJuYW1lXG4gIC5zcGxpdChwYXRoLnNlcClcbiAgLnJlZHVjZSgobWVtbywgXywgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgY29uc3QgcHJlZml4ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXggKyAxKS5qb2luKHBhdGguc2VwKSArIHBhdGguc2VwO1xuICAgIGlmICghcHJlZml4LmluY2x1ZGVzKFwibm9kZV9tb2R1bGVzXCIgKyBwYXRoLnNlcCkpIHtcbiAgICAgIG1lbW8udW5zaGlmdChcbiAgICAgICAgcGF0aC5qb2luKFxuICAgICAgICAgIHByZWZpeCxcbiAgICAgICAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgICAgICAgIFwidGlrdG9rZW5cIixcbiAgICAgICAgICBcIlwiLFxuICAgICAgICAgIFwiLi90aWt0b2tlbl9iZy53YXNtXCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW87XG4gIH0sIFtdKVxuY2FuZGlkYXRlcy51bnNoaWZ0KHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi90aWt0b2tlbl9iZy53YXNtXCIpKTtcblxubGV0IGJ5dGVzID0gbnVsbDtcbmZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZXMpIHtcbiAgdHJ5IHtcbiAgICBieXRlcyA9IGZzLnJlYWRGaWxlU3luYyhjYW5kaWRhdGUpO1xuICAgIGJyZWFrO1xuICB9IGNhdGNoIHt9XG59XG5cbmlmIChieXRlcyA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHRpa3Rva2VuX2JnLndhc21cIik7XG5jb25zdCB3YXNtTW9kdWxlID0gbmV3IFdlYkFzc2VtYmx5Lk1vZHVsZShieXRlcyk7XG5jb25zdCB3YXNtSW5zdGFuY2UgPSBuZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2Uod2FzbU1vZHVsZSwgaW1wb3J0cyk7XG53YXNtLl9fd2JnX3NldF93YXNtKHdhc21JbnN0YW5jZS5leHBvcnRzKTtcbmV4cG9ydHNbXCJnZXRfZW5jb2RpbmdcIl0gPSB3YXNtW1wiZ2V0X2VuY29kaW5nXCJdO1xuZXhwb3J0c1tcImVuY29kaW5nX2Zvcl9tb2RlbFwiXSA9IHdhc21bXCJlbmNvZGluZ19mb3JfbW9kZWxcIl07XG5leHBvcnRzW1wiVGlrdG9rZW5cIl0gPSB3YXNtW1wiVGlrdG9rZW5cIl07Il0sIm5hbWVzIjpbIndhc20iLCJyZXF1aXJlIiwiaW1wb3J0cyIsInBhdGgiLCJmcyIsImNhbmRpZGF0ZXMiLCJfX2Rpcm5hbWUiLCJzcGxpdCIsInNlcCIsInJlZHVjZSIsIm1lbW8iLCJfIiwiaW5kZXgiLCJhcnJheSIsInByZWZpeCIsInNsaWNlIiwiam9pbiIsImluY2x1ZGVzIiwidW5zaGlmdCIsImJ5dGVzIiwiY2FuZGlkYXRlIiwicmVhZEZpbGVTeW5jIiwiRXJyb3IiLCJ3YXNtTW9kdWxlIiwiV2ViQXNzZW1ibHkiLCJNb2R1bGUiLCJ3YXNtSW5zdGFuY2UiLCJJbnN0YW5jZSIsIl9fd2JnX3NldF93YXNtIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/tiktoken/tiktoken.cjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/tiktoken/tiktoken_bg.cjs":
/*!***********************************************!*\
  !*** ./node_modules/tiktoken/tiktoken_bg.cjs ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\nlet wasm;\nmodule.exports.__wbg_set_wasm = function(val) {\n    wasm = val;\n};\nconst heap = new Array(128).fill(undefined);\nheap.push(undefined, null, true, false);\nfunction getObject(idx) {\n    return heap[idx];\n}\nlet heap_next = heap.length;\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\nlet WASM_VECTOR_LEN = 0;\nlet cachedUint8ArrayMemory0 = null;\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\nconst lTextEncoder = typeof TextEncoder === \"undefined\" ? (0, module.require)(\"util\").TextEncoder : TextEncoder;\nlet cachedTextEncoder = new lTextEncoder(\"utf-8\");\nconst encodeString = typeof cachedTextEncoder.encodeInto === \"function\" ? function(arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n} : function(arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n};\nfunction passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n    const mem = getUint8ArrayMemory0();\n    let offset = 0;\n    for(; offset < len; offset++){\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\nlet cachedDataViewMemory0 = null;\nfunction getDataViewMemory0() {\n    if (cachedDataViewMemory0 === null || cachedDataViewMemory0.buffer.detached === true || cachedDataViewMemory0.buffer.detached === undefined && cachedDataViewMemory0.buffer !== wasm.memory.buffer) {\n        cachedDataViewMemory0 = new DataView(wasm.memory.buffer);\n    }\n    return cachedDataViewMemory0;\n}\nconst lTextDecoder = typeof TextDecoder === \"undefined\" ? (0, module.require)(\"util\").TextDecoder : TextDecoder;\nlet cachedTextDecoder = new lTextDecoder(\"utf-8\", {\n    ignoreBOM: true,\n    fatal: true\n});\ncachedTextDecoder.decode();\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n    heap[idx] = obj;\n    return idx;\n}\nlet cachedUint32ArrayMemory0 = null;\nfunction getUint32ArrayMemory0() {\n    if (cachedUint32ArrayMemory0 === null || cachedUint32ArrayMemory0.byteLength === 0) {\n        cachedUint32ArrayMemory0 = new Uint32Array(wasm.memory.buffer);\n    }\n    return cachedUint32ArrayMemory0;\n}\nfunction getArrayU32FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint32ArrayMemory0().subarray(ptr / 4, ptr / 4 + len);\n}\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8ArrayMemory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\nfunction passArray32ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 4, 4) >>> 0;\n    getUint32ArrayMemory0().set(arg, ptr / 4);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\nmodule.exports.get_encoding = function(encoding, extend_special_tokens) {\n    if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passStringToWasm0(encoding, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.get_encoding(retptr, ptr0, len0, addHeapObject(extend_special_tokens));\n        var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n        var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n        var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Tiktoken.__wrap(r0);\n    } finally{\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n};\nmodule.exports.encoding_for_model = function(model, extend_special_tokens) {\n    if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passStringToWasm0(model, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.encoding_for_model(retptr, ptr0, len0, addHeapObject(extend_special_tokens));\n        var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n        var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n        var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\n        if (r2) {\n            throw takeObject(r1);\n        }\n        return Tiktoken.__wrap(r0);\n    } finally{\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n};\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_export_3(addHeapObject(e));\n    }\n}\nconst TiktokenFinalization = typeof FinalizationRegistry === \"undefined\" ? {\n    register: ()=>{},\n    unregister: ()=>{}\n} : new FinalizationRegistry((ptr)=>wasm.__wbg_tiktoken_free(ptr >>> 0, 1));\n/** */ class Tiktoken {\n    /**\n     * @param {string} tiktoken_bfe\n     * @param {any} special_tokens\n     * @param {string} pat_str\n     */ constructor(tiktoken_bfe, special_tokens, pat_str){\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        const ptr0 = passStringToWasm0(tiktoken_bfe, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len0 = WASM_VECTOR_LEN;\n        const ptr1 = passStringToWasm0(pat_str, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n        const len1 = WASM_VECTOR_LEN;\n        const ret = wasm.tiktoken_new(ptr0, len0, addHeapObject(special_tokens), ptr1, len1);\n        this.__wbg_ptr = ret >>> 0;\n        TiktokenFinalization.register(this, this.__wbg_ptr, this);\n        return this;\n    }\n    /** @returns {string | undefined} */ get name() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.tiktoken_name(retptr, this.__wbg_ptr);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_export_2(r0, r1 * 1, 1);\n            }\n            return v1;\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(Tiktoken.prototype);\n        obj.__wbg_ptr = ptr;\n        TiktokenFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        TiktokenFinalization.unregister(this);\n        return ptr;\n    }\n    free() {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_tiktoken_free(ptr, 0);\n    }\n    /**\n     * @param {string} text\n     * @param {any} allowed_special\n     * @param {any} disallowed_special\n     * @returns {Uint32Array}\n     */ encode(text, allowed_special, disallowed_special) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passStringToWasm0(text, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.tiktoken_encode(retptr, this.__wbg_ptr, ptr0, len0, addHeapObject(allowed_special), addHeapObject(disallowed_special));\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\n            var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\n            if (r3) {\n                throw takeObject(r2);\n            }\n            var v2 = getArrayU32FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_export_2(r0, r1 * 4, 4);\n            return v2;\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * @param {string} text\n     * @returns {Uint32Array}\n     */ encode_ordinary(text) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passStringToWasm0(text, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.tiktoken_encode_ordinary(retptr, this.__wbg_ptr, ptr0, len0);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v2 = getArrayU32FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_export_2(r0, r1 * 4, 4);\n            return v2;\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * @param {string} text\n     * @param {any} allowed_special\n     * @param {any} disallowed_special\n     * @returns {any}\n     */ encode_with_unstable(text, allowed_special, disallowed_special) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passStringToWasm0(text, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.tiktoken_encode_with_unstable(retptr, this.__wbg_ptr, ptr0, len0, addHeapObject(allowed_special), addHeapObject(disallowed_special));\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * @param {Uint8Array} bytes\n     * @returns {number}\n     */ encode_single_token(bytes) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        const ptr0 = passArray8ToWasm0(bytes, wasm.__wbindgen_export_0);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.tiktoken_encode_single_token(this.__wbg_ptr, ptr0, len0);\n        return ret >>> 0;\n    }\n    /**\n     * @param {Uint32Array} tokens\n     * @returns {Uint8Array}\n     */ decode(tokens) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passArray32ToWasm0(tokens, wasm.__wbindgen_export_0);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.tiktoken_decode(retptr, this.__wbg_ptr, ptr0, len0);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v2 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_export_2(r0, r1 * 1, 1);\n            return v2;\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * @param {number} token\n     * @returns {Uint8Array}\n     */ decode_single_token_bytes(token) {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.tiktoken_decode_single_token_bytes(retptr, this.__wbg_ptr, token);\n            var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\n            var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\n            var v1 = getArrayU8FromWasm0(r0, r1).slice();\n            wasm.__wbindgen_export_2(r0, r1 * 1, 1);\n            return v1;\n        } finally{\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /** @returns {any} */ token_byte_values() {\n        if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n        const ret = wasm.tiktoken_token_byte_values(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n}\nmodule.exports.Tiktoken = Tiktoken;\nmodule.exports.__wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n;\nmodule.exports.__wbindgen_is_undefined = function(arg0) {\n    const ret = getObject(arg0) === undefined;\n    return ret;\n};\n;\nmodule.exports.__wbindgen_string_get = function(arg0, arg1) {\n    if (wasm == null) throw new Error(\"tiktoken: WASM binary has not been propery initialized.\");\n    const obj = getObject(arg1);\n    const ret = typeof obj === \"string\" ? obj : undefined;\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    var len1 = WASM_VECTOR_LEN;\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\n};\n;\nmodule.exports.__wbindgen_error_new = function(arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n;\nmodule.exports.__wbg_parse_52202f117ec9ecfa = function() {\n    return handleError(function(arg0, arg1) {\n        const ret = JSON.parse(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    }, arguments);\n};\n;\nmodule.exports.__wbg_stringify_bbf45426c92a6bf5 = function() {\n    return handleError(function(arg0) {\n        const ret = JSON.stringify(getObject(arg0));\n        return addHeapObject(ret);\n    }, arguments);\n};\n;\nmodule.exports.__wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdGlrdG9rZW4vdGlrdG9rZW5fYmcuY2pzIiwibWFwcGluZ3MiOiI7QUFBQSxJQUFJQTtBQUNKQyw2QkFBNkIsR0FBRyxTQUFTRyxHQUFHO0lBQ3hDSixPQUFPSTtBQUNYO0FBQ0EsTUFBTUMsT0FBTyxJQUFJQyxNQUFNLEtBQUtDLElBQUksQ0FBQ0M7QUFFakNILEtBQUtJLElBQUksQ0FBQ0QsV0FBVyxNQUFNLE1BQU07QUFFakMsU0FBU0UsVUFBVUMsR0FBRztJQUFJLE9BQU9OLElBQUksQ0FBQ00sSUFBSTtBQUFFO0FBRTVDLElBQUlDLFlBQVlQLEtBQUtRLE1BQU07QUFFM0IsU0FBU0MsV0FBV0gsR0FBRztJQUNuQixJQUFJQSxNQUFNLEtBQUs7SUFDZk4sSUFBSSxDQUFDTSxJQUFJLEdBQUdDO0lBQ1pBLFlBQVlEO0FBQ2hCO0FBRUEsU0FBU0ksV0FBV0osR0FBRztJQUNuQixNQUFNSyxNQUFNTixVQUFVQztJQUN0QkcsV0FBV0g7SUFDWCxPQUFPSztBQUNYO0FBRUEsSUFBSUMsa0JBQWtCO0FBRXRCLElBQUlDLDBCQUEwQjtBQUU5QixTQUFTQztJQUNMLElBQUlELDRCQUE0QixRQUFRQSx3QkFBd0JFLFVBQVUsS0FBSyxHQUFHO1FBQzlFRiwwQkFBMEIsSUFBSUcsV0FBV3JCLEtBQUtzQixNQUFNLENBQUNDLE1BQU07SUFDL0Q7SUFDQSxPQUFPTDtBQUNYO0FBRUEsTUFBTU0sZUFBZSxPQUFPQyxnQkFBZ0IsY0FBYyxDQUFDLEdBQUd4QixPQUFPeUIsT0FBTyxFQUFFLFFBQVFELFdBQVcsR0FBR0E7QUFFcEcsSUFBSUUsb0JBQW9CLElBQUlILGFBQWE7QUFFekMsTUFBTUksZUFBZ0IsT0FBT0Qsa0JBQWtCRSxVQUFVLEtBQUssYUFDeEQsU0FBVUMsR0FBRyxFQUFFQyxJQUFJO0lBQ3JCLE9BQU9KLGtCQUFrQkUsVUFBVSxDQUFDQyxLQUFLQztBQUM3QyxJQUNNLFNBQVVELEdBQUcsRUFBRUMsSUFBSTtJQUNyQixNQUFN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dEQ7O0FBRUF0RyxtQ0FBbUMsR0FBRyxTQUFTd0ksSUFBSSxFQUFFRyxJQUFJO0lBQ3JELE1BQU01SCxNQUFNLElBQUl5RCxNQUFNYixtQkFBbUI2RSxNQUFNRztJQUMvQyxPQUFPL0UsY0FBYzdDO0FBQ3pCOztBQUVBZiwyQ0FBMkMsR0FBRztJQUMxQyxPQUFPdUYsWUFBWSxTQUFVaUQsSUFBSSxFQUFFRyxJQUFJO1FBQ25DLE1BQU01SCxNQUFNZ0ksS0FBS0MsS0FBSyxDQUFDckYsbUJBQW1CNkUsTUFBTUc7UUFDaEQsT0FBTy9FLGNBQWM3QztJQUN6QixHQUFHa0k7QUFBVzs7QUFFbEJqSiwrQ0FBK0MsR0FBRztJQUM5QyxPQUFPdUYsWUFBWSxTQUFVaUQsSUFBSTtRQUM3QixNQUFNekgsTUFBTWdJLEtBQUtJLFNBQVMsQ0FBQzFJLFVBQVUrSDtRQUNyQyxPQUFPNUUsY0FBYzdDO0lBQ3pCLEdBQUdrSTtBQUFXOztBQUVsQmpKLCtCQUErQixHQUFHLFNBQVN3SSxJQUFJLEVBQUVHLElBQUk7SUFDakQsTUFBTSxJQUFJbkUsTUFBTWIsbUJBQW1CNkUsTUFBTUc7QUFDN0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcnQvLi9ub2RlX21vZHVsZXMvdGlrdG9rZW4vdGlrdG9rZW5fYmcuY2pzPzI4OGUiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHdhc207XG5tb2R1bGUuZXhwb3J0cy5fX3diZ19zZXRfd2FzbSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHdhc20gPSB2YWw7XG59O1xuY29uc3QgaGVhcCA9IG5ldyBBcnJheSgxMjgpLmZpbGwodW5kZWZpbmVkKTtcblxuaGVhcC5wdXNoKHVuZGVmaW5lZCwgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xuXG5mdW5jdGlvbiBnZXRPYmplY3QoaWR4KSB7IHJldHVybiBoZWFwW2lkeF07IH1cblxubGV0IGhlYXBfbmV4dCA9IGhlYXAubGVuZ3RoO1xuXG5mdW5jdGlvbiBkcm9wT2JqZWN0KGlkeCkge1xuICAgIGlmIChpZHggPCAxMzIpIHJldHVybjtcbiAgICBoZWFwW2lkeF0gPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaWR4O1xufVxuXG5mdW5jdGlvbiB0YWtlT2JqZWN0KGlkeCkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChpZHgpO1xuICAgIGRyb3BPYmplY3QoaWR4KTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG5sZXQgV0FTTV9WRUNUT1JfTEVOID0gMDtcblxubGV0IGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0VWludDhBcnJheU1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwID09PSBudWxsIHx8IGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGVkVWludDhBcnJheU1lbW9yeTAgPSBuZXcgVWludDhBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkVWludDhBcnJheU1lbW9yeTA7XG59XG5cbmNvbnN0IGxUZXh0RW5jb2RlciA9IHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ3VuZGVmaW5lZCcgPyAoMCwgbW9kdWxlLnJlcXVpcmUpKCd1dGlsJykuVGV4dEVuY29kZXIgOiBUZXh0RW5jb2RlcjtcblxubGV0IGNhY2hlZFRleHRFbmNvZGVyID0gbmV3IGxUZXh0RW5jb2RlcigndXRmLTgnKTtcblxuY29uc3QgZW5jb2RlU3RyaW5nID0gKHR5cGVvZiBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGVJbnRvID09PSAnZnVuY3Rpb24nXG4gICAgPyBmdW5jdGlvbiAoYXJnLCB2aWV3KSB7XG4gICAgcmV0dXJuIGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZUludG8oYXJnLCB2aWV3KTtcbn1cbiAgICA6IGZ1bmN0aW9uIChhcmcsIHZpZXcpIHtcbiAgICBjb25zdCBidWYgPSBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGUoYXJnKTtcbiAgICB2aWV3LnNldChidWYpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlYWQ6IGFyZy5sZW5ndGgsXG4gICAgICAgIHdyaXR0ZW46IGJ1Zi5sZW5ndGhcbiAgICB9O1xufSk7XG5cbmZ1bmN0aW9uIHBhc3NTdHJpbmdUb1dhc20wKGFyZywgbWFsbG9jLCByZWFsbG9jKSB7XG5cbiAgICBpZiAocmVhbGxvYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZShhcmcpO1xuICAgICAgICBjb25zdCBwdHIgPSBtYWxsb2MoYnVmLmxlbmd0aCwgMSkgPj4+IDA7XG4gICAgICAgIGdldFVpbnQ4QXJyYXlNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBidWYubGVuZ3RoKS5zZXQoYnVmKTtcbiAgICAgICAgV0FTTV9WRUNUT1JfTEVOID0gYnVmLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBsZXQgbGVuID0gYXJnLmxlbmd0aDtcbiAgICBsZXQgcHRyID0gbWFsbG9jKGxlbiwgMSkgPj4+IDA7XG5cbiAgICBjb25zdCBtZW0gPSBnZXRVaW50OEFycmF5TWVtb3J5MCgpO1xuXG4gICAgbGV0IG9mZnNldCA9IDA7XG5cbiAgICBmb3IgKDsgb2Zmc2V0IDwgbGVuOyBvZmZzZXQrKykge1xuICAgICAgICBjb25zdCBjb2RlID0gYXJnLmNoYXJDb2RlQXQob2Zmc2V0KTtcbiAgICAgICAgaWYgKGNvZGUgPiAweDdGKSBicmVhaztcbiAgICAgICAgbWVtW3B0ciArIG9mZnNldF0gPSBjb2RlO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgIT09IGxlbikge1xuICAgICAgICBpZiAob2Zmc2V0ICE9PSAwKSB7XG4gICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2Uob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBwdHIgPSByZWFsbG9jKHB0ciwgbGVuLCBsZW4gPSBvZmZzZXQgKyBhcmcubGVuZ3RoICogMywgMSkgPj4+IDA7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBnZXRVaW50OEFycmF5TWVtb3J5MCgpLnN1YmFycmF5KHB0ciArIG9mZnNldCwgcHRyICsgbGVuKTtcbiAgICAgICAgY29uc3QgcmV0ID0gZW5jb2RlU3RyaW5nKGFyZywgdmlldyk7XG5cbiAgICAgICAgb2Zmc2V0ICs9IHJldC53cml0dGVuO1xuICAgICAgICBwdHIgPSByZWFsbG9jKHB0ciwgbGVuLCBvZmZzZXQsIDEpID4+PiAwO1xuICAgIH1cblxuICAgIFdBU01fVkVDVE9SX0xFTiA9IG9mZnNldDtcbiAgICByZXR1cm4gcHRyO1xufVxuXG5mdW5jdGlvbiBpc0xpa2VOb25lKHgpIHtcbiAgICByZXR1cm4geCA9PT0gdW5kZWZpbmVkIHx8IHggPT09IG51bGw7XG59XG5cbmxldCBjYWNoZWREYXRhVmlld01lbW9yeTAgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREYXRhVmlld01lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZERhdGFWaWV3TWVtb3J5MCA9PT0gbnVsbCB8fCBjYWNoZWREYXRhVmlld01lbW9yeTAuYnVmZmVyLmRldGFjaGVkID09PSB0cnVlIHx8IChjYWNoZWREYXRhVmlld01lbW9yeTAuYnVmZmVyLmRldGFjaGVkID09PSB1bmRlZmluZWQgJiYgY2FjaGVkRGF0YVZpZXdNZW1vcnkwLmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSkge1xuICAgICAgICBjYWNoZWREYXRhVmlld01lbW9yeTAgPSBuZXcgRGF0YVZpZXcod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZERhdGFWaWV3TWVtb3J5MDtcbn1cblxuY29uc3QgbFRleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAndW5kZWZpbmVkJyA/ICgwLCBtb2R1bGUucmVxdWlyZSkoJ3V0aWwnKS5UZXh0RGVjb2RlciA6IFRleHREZWNvZGVyO1xuXG5sZXQgY2FjaGVkVGV4dERlY29kZXIgPSBuZXcgbFRleHREZWNvZGVyKCd1dGYtOCcsIHsgaWdub3JlQk9NOiB0cnVlLCBmYXRhbDogdHJ1ZSB9KTtcblxuY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKCk7XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHB0ciA9IHB0ciA+Pj4gMDtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4QXJyYXlNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cblxuZnVuY3Rpb24gYWRkSGVhcE9iamVjdChvYmopIHtcbiAgICBpZiAoaGVhcF9uZXh0ID09PSBoZWFwLmxlbmd0aCkgaGVhcC5wdXNoKGhlYXAubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgaWR4ID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGhlYXBbaWR4XTtcblxuICAgIGhlYXBbaWR4XSA9IG9iajtcbiAgICByZXR1cm4gaWR4O1xufVxuXG5sZXQgY2FjaGVkVWludDMyQXJyYXlNZW1vcnkwID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0VWludDMyQXJyYXlNZW1vcnkwKCkge1xuICAgIGlmIChjYWNoZWRVaW50MzJBcnJheU1lbW9yeTAgPT09IG51bGwgfHwgY2FjaGVkVWludDMyQXJyYXlNZW1vcnkwLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGVkVWludDMyQXJyYXlNZW1vcnkwID0gbmV3IFVpbnQzMkFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRVaW50MzJBcnJheU1lbW9yeTA7XG59XG5cbmZ1bmN0aW9uIGdldEFycmF5VTMyRnJvbVdhc20wKHB0ciwgbGVuKSB7XG4gICAgcHRyID0gcHRyID4+PiAwO1xuICAgIHJldHVybiBnZXRVaW50MzJBcnJheU1lbW9yeTAoKS5zdWJhcnJheShwdHIgLyA0LCBwdHIgLyA0ICsgbGVuKTtcbn1cblxuZnVuY3Rpb24gcGFzc0FycmF5OFRvV2FzbTAoYXJnLCBtYWxsb2MpIHtcbiAgICBjb25zdCBwdHIgPSBtYWxsb2MoYXJnLmxlbmd0aCAqIDEsIDEpID4+PiAwO1xuICAgIGdldFVpbnQ4QXJyYXlNZW1vcnkwKCkuc2V0KGFyZywgcHRyIC8gMSk7XG4gICAgV0FTTV9WRUNUT1JfTEVOID0gYXJnLmxlbmd0aDtcbiAgICByZXR1cm4gcHRyO1xufVxuXG5mdW5jdGlvbiBwYXNzQXJyYXkzMlRvV2FzbTAoYXJnLCBtYWxsb2MpIHtcbiAgICBjb25zdCBwdHIgPSBtYWxsb2MoYXJnLmxlbmd0aCAqIDQsIDQpID4+PiAwO1xuICAgIGdldFVpbnQzMkFycmF5TWVtb3J5MCgpLnNldChhcmcsIHB0ciAvIDQpO1xuICAgIFdBU01fVkVDVE9SX0xFTiA9IGFyZy5sZW5ndGg7XG4gICAgcmV0dXJuIHB0cjtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlVOEZyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHB0ciA9IHB0ciA+Pj4gMDtcbiAgICByZXR1cm4gZ2V0VWludDhBcnJheU1lbW9yeTAoKS5zdWJhcnJheShwdHIgLyAxLCBwdHIgLyAxICsgbGVuKTtcbn1cbm1vZHVsZS5leHBvcnRzLmdldF9lbmNvZGluZyA9IGZ1bmN0aW9uKGVuY29kaW5nLCBleHRlbmRfc3BlY2lhbF90b2tlbnMpIHtcbiAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICBjb25zdCBwdHIwID0gcGFzc1N0cmluZ1RvV2FzbTAoZW5jb2RpbmcsIHdhc20uX193YmluZGdlbl9leHBvcnRfMCwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8xKTtcbiAgICAgICAgY29uc3QgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgd2FzbS5nZXRfZW5jb2RpbmcocmV0cHRyLCBwdHIwLCBsZW4wLCBhZGRIZWFwT2JqZWN0KGV4dGVuZF9zcGVjaWFsX3Rva2VucykpO1xuICAgICAgICB2YXIgcjAgPSBnZXREYXRhVmlld01lbW9yeTAoKS5nZXRJbnQzMihyZXRwdHIgKyA0ICogMCwgdHJ1ZSk7XG4gICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgdmFyIHIyID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDIsIHRydWUpO1xuICAgICAgICBpZiAocjIpIHtcbiAgICAgICAgICAgIHRocm93IHRha2VPYmplY3QocjEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUaWt0b2tlbi5fX3dyYXAocjApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnRzLmVuY29kaW5nX2Zvcl9tb2RlbCA9IGZ1bmN0aW9uKG1vZGVsLCBleHRlbmRfc3BlY2lhbF90b2tlbnMpIHtcbiAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICBjb25zdCBwdHIwID0gcGFzc1N0cmluZ1RvV2FzbTAobW9kZWwsIHdhc20uX193YmluZGdlbl9leHBvcnRfMCwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8xKTtcbiAgICAgICAgY29uc3QgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgd2FzbS5lbmNvZGluZ19mb3JfbW9kZWwocmV0cHRyLCBwdHIwLCBsZW4wLCBhZGRIZWFwT2JqZWN0KGV4dGVuZF9zcGVjaWFsX3Rva2VucykpO1xuICAgICAgICB2YXIgcjAgPSBnZXREYXRhVmlld01lbW9yeTAoKS5nZXRJbnQzMihyZXRwdHIgKyA0ICogMCwgdHJ1ZSk7XG4gICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgdmFyIHIyID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDIsIHRydWUpO1xuICAgICAgICBpZiAocjIpIHtcbiAgICAgICAgICAgIHRocm93IHRha2VPYmplY3QocjEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUaWt0b2tlbi5fX3dyYXAocjApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZiwgYXJncykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8zKGFkZEhlYXBPYmplY3QoZSkpO1xuICAgIH1cbn1cblxuY29uc3QgVGlrdG9rZW5GaW5hbGl6YXRpb24gPSAodHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5ID09PSAndW5kZWZpbmVkJylcbiAgICA/IHsgcmVnaXN0ZXI6ICgpID0+IHt9LCB1bnJlZ2lzdGVyOiAoKSA9PiB7fSB9XG4gICAgOiBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkocHRyID0+IHdhc20uX193YmdfdGlrdG9rZW5fZnJlZShwdHIgPj4+IDAsIDEpKTtcbi8qKiAqL1xuY2xhc3MgVGlrdG9rZW4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aWt0b2tlbl9iZmVcbiAgICAgKiBAcGFyYW0ge2FueX0gc3BlY2lhbF90b2tlbnNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0X3N0clxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRpa3Rva2VuX2JmZSwgc3BlY2lhbF90b2tlbnMsIHBhdF9zdHIpIHtcbiAgICAgICAgaWYgKHdhc20gPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwidGlrdG9rZW46IFdBU00gYmluYXJ5IGhhcyBub3QgYmVlbiBwcm9wZXJ5IGluaXRpYWxpemVkLlwiKTtcbiAgICAgICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKHRpa3Rva2VuX2JmZSwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8wLCB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzEpO1xuICAgICAgICBjb25zdCBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICBjb25zdCBwdHIxID0gcGFzc1N0cmluZ1RvV2FzbTAocGF0X3N0ciwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8wLCB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzEpO1xuICAgICAgICBjb25zdCBsZW4xID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLnRpa3Rva2VuX25ldyhwdHIwLCBsZW4wLCBhZGRIZWFwT2JqZWN0KHNwZWNpYWxfdG9rZW5zKSwgcHRyMSwgbGVuMSk7XG4gICAgICAgIHRoaXMuX193YmdfcHRyID0gcmV0ID4+PiAwO1xuICAgICAgICBUaWt0b2tlbkZpbmFsaXphdGlvbi5yZWdpc3Rlcih0aGlzLCB0aGlzLl9fd2JnX3B0ciwgdGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLnRpa3Rva2VuX25hbWUocmV0cHRyLCB0aGlzLl9fd2JnX3B0cik7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXREYXRhVmlld01lbW9yeTAoKS5nZXRJbnQzMihyZXRwdHIgKyA0ICogMCwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXREYXRhVmlld01lbW9yeTAoKS5nZXRJbnQzMihyZXRwdHIgKyA0ICogMSwgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgdjE7XG4gICAgICAgICAgICBpZiAocjAgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2MSA9IGdldFN0cmluZ0Zyb21XYXNtMChyMCwgcjEpLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8yKHIwLCByMSAqIDEsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHYxO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBfX3dyYXAocHRyKSB7XG4gICAgICAgIHB0ciA9IHB0ciA+Pj4gMDtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShUaWt0b2tlbi5wcm90b3R5cGUpO1xuICAgICAgICBvYmouX193YmdfcHRyID0gcHRyO1xuICAgICAgICBUaWt0b2tlbkZpbmFsaXphdGlvbi5yZWdpc3RlcihvYmosIG9iai5fX3diZ19wdHIsIG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fd2JnX3B0cjtcbiAgICAgICAgdGhpcy5fX3diZ19wdHIgPSAwO1xuICAgICAgICBUaWt0b2tlbkZpbmFsaXphdGlvbi51bnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGZyZWUoKSB7XG4gICAgICAgIGlmICh3YXNtID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcInRpa3Rva2VuOiBXQVNNIGJpbmFyeSBoYXMgbm90IGJlZW4gcHJvcGVyeSBpbml0aWFsaXplZC5cIik7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX19kZXN0cm95X2ludG9fcmF3KCk7XG4gICAgICAgIHdhc20uX193YmdfdGlrdG9rZW5fZnJlZShwdHIsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAgICogQHBhcmFtIHthbnl9IGFsbG93ZWRfc3BlY2lhbFxuICAgICAqIEBwYXJhbSB7YW55fSBkaXNhbGxvd2VkX3NwZWNpYWxcbiAgICAgKiBAcmV0dXJucyB7VWludDMyQXJyYXl9XG4gICAgICovXG4gICAgZW5jb2RlKHRleHQsIGFsbG93ZWRfc3BlY2lhbCwgZGlzYWxsb3dlZF9zcGVjaWFsKSB7XG4gICAgICAgIGlmICh3YXNtID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcInRpa3Rva2VuOiBXQVNNIGJpbmFyeSBoYXMgbm90IGJlZW4gcHJvcGVyeSBpbml0aWFsaXplZC5cIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIGNvbnN0IHB0cjAgPSBwYXNzU3RyaW5nVG9XYXNtMCh0ZXh0LCB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzAsIHdhc20uX193YmluZGdlbl9leHBvcnRfMSk7XG4gICAgICAgICAgICBjb25zdCBsZW4wID0gV0FTTV9WRUNUT1JfTEVOO1xuICAgICAgICAgICAgd2FzbS50aWt0b2tlbl9lbmNvZGUocmV0cHRyLCB0aGlzLl9fd2JnX3B0ciwgcHRyMCwgbGVuMCwgYWRkSGVhcE9iamVjdChhbGxvd2VkX3NwZWNpYWwpLCBhZGRIZWFwT2JqZWN0KGRpc2FsbG93ZWRfc3BlY2lhbCkpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDAsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDEsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHIyID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDIsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHIzID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDMsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHIzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdGFrZU9iamVjdChyMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdjIgPSBnZXRBcnJheVUzMkZyb21XYXNtMChyMCwgcjEpLnNsaWNlKCk7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzIocjAsIHIxICogNCwgNCk7XG4gICAgICAgICAgICByZXR1cm4gdjI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICAgKiBAcmV0dXJucyB7VWludDMyQXJyYXl9XG4gICAgICovXG4gICAgZW5jb2RlX29yZGluYXJ5KHRleHQpIHtcbiAgICAgICAgaWYgKHdhc20gPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwidGlrdG9rZW46IFdBU00gYmluYXJ5IGhhcyBub3QgYmVlbiBwcm9wZXJ5IGluaXRpYWxpemVkLlwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgY29uc3QgcHRyMCA9IHBhc3NTdHJpbmdUb1dhc20wKHRleHQsIHdhc20uX193YmluZGdlbl9leHBvcnRfMCwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8xKTtcbiAgICAgICAgICAgIGNvbnN0IGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgICAgICB3YXNtLnRpa3Rva2VuX2VuY29kZV9vcmRpbmFyeShyZXRwdHIsIHRoaXMuX193YmdfcHRyLCBwdHIwLCBsZW4wKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAwLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciB2MiA9IGdldEFycmF5VTMyRnJvbVdhc20wKHIwLCByMSkuc2xpY2UoKTtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9leHBvcnRfMihyMCwgcjEgKiA0LCA0KTtcbiAgICAgICAgICAgIHJldHVybiB2MjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgICAqIEBwYXJhbSB7YW55fSBhbGxvd2VkX3NwZWNpYWxcbiAgICAgKiBAcGFyYW0ge2FueX0gZGlzYWxsb3dlZF9zcGVjaWFsXG4gICAgICogQHJldHVybnMge2FueX1cbiAgICAgKi9cbiAgICBlbmNvZGVfd2l0aF91bnN0YWJsZSh0ZXh0LCBhbGxvd2VkX3NwZWNpYWwsIGRpc2FsbG93ZWRfc3BlY2lhbCkge1xuICAgICAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICBjb25zdCBwdHIwID0gcGFzc1N0cmluZ1RvV2FzbTAodGV4dCwgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8wLCB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzEpO1xuICAgICAgICAgICAgY29uc3QgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgICAgIHdhc20udGlrdG9rZW5fZW5jb2RlX3dpdGhfdW5zdGFibGUocmV0cHRyLCB0aGlzLl9fd2JnX3B0ciwgcHRyMCwgbGVuMCwgYWRkSGVhcE9iamVjdChhbGxvd2VkX3NwZWNpYWwpLCBhZGRIZWFwT2JqZWN0KGRpc2FsbG93ZWRfc3BlY2lhbCkpO1xuICAgICAgICAgICAgdmFyIHIwID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDAsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHIxID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDEsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHIyID0gZ2V0RGF0YVZpZXdNZW1vcnkwKCkuZ2V0SW50MzIocmV0cHRyICsgNCAqIDIsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHIyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdGFrZU9iamVjdChyMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGFrZU9iamVjdChyMCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBieXRlc1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgZW5jb2RlX3NpbmdsZV90b2tlbihieXRlcykge1xuICAgICAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgICAgICBjb25zdCBwdHIwID0gcGFzc0FycmF5OFRvV2FzbTAoYnl0ZXMsIHdhc20uX193YmluZGdlbl9leHBvcnRfMCk7XG4gICAgICAgIGNvbnN0IGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgIGNvbnN0IHJldCA9IHdhc20udGlrdG9rZW5fZW5jb2RlX3NpbmdsZV90b2tlbih0aGlzLl9fd2JnX3B0ciwgcHRyMCwgbGVuMCk7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtVaW50MzJBcnJheX0gdG9rZW5zXG4gICAgICogQHJldHVybnMge1VpbnQ4QXJyYXl9XG4gICAgICovXG4gICAgZGVjb2RlKHRva2Vucykge1xuICAgICAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICBjb25zdCBwdHIwID0gcGFzc0FycmF5MzJUb1dhc20wKHRva2Vucywgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8wKTtcbiAgICAgICAgICAgIGNvbnN0IGxlbjAgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgICAgICAgICB3YXNtLnRpa3Rva2VuX2RlY29kZShyZXRwdHIsIHRoaXMuX193YmdfcHRyLCBwdHIwLCBsZW4wKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAwLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciB2MiA9IGdldEFycmF5VThGcm9tV2FzbTAocjAsIHIxKS5zbGljZSgpO1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8yKHIwLCByMSAqIDEsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHYyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2tlblxuICAgICAqIEByZXR1cm5zIHtVaW50OEFycmF5fVxuICAgICAqL1xuICAgIGRlY29kZV9zaW5nbGVfdG9rZW5fYnl0ZXModG9rZW4pIHtcbiAgICAgICAgaWYgKHdhc20gPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwidGlrdG9rZW46IFdBU00gYmluYXJ5IGhhcyBub3QgYmVlbiBwcm9wZXJ5IGluaXRpYWxpemVkLlwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHB0ciA9IHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigtMTYpO1xuICAgICAgICAgICAgd2FzbS50aWt0b2tlbl9kZWNvZGVfc2luZ2xlX3Rva2VuX2J5dGVzKHJldHB0ciwgdGhpcy5fX3diZ19wdHIsIHRva2VuKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAwLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldERhdGFWaWV3TWVtb3J5MCgpLmdldEludDMyKHJldHB0ciArIDQgKiAxLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciB2MSA9IGdldEFycmF5VThGcm9tV2FzbTAocjAsIHIxKS5zbGljZSgpO1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2V4cG9ydF8yKHIwLCByMSAqIDEsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHYxO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKDE2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBAcmV0dXJucyB7YW55fSAqL1xuICAgIHRva2VuX2J5dGVfdmFsdWVzKCkge1xuICAgICAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLnRpa3Rva2VuX3Rva2VuX2J5dGVfdmFsdWVzKHRoaXMuX193YmdfcHRyKTtcbiAgICAgICAgcmV0dXJuIHRha2VPYmplY3QocmV0KTtcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cy5UaWt0b2tlbiA9IFRpa3Rva2VuO1xubW9kdWxlLmV4cG9ydHMuX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWYgPSBmdW5jdGlvbihhcmcwKSB7XG4gICAgdGFrZU9iamVjdChhcmcwKTtcbn07XG47XG5tb2R1bGUuZXhwb3J0cy5fX3diaW5kZ2VuX2lzX3VuZGVmaW5lZCA9IGZ1bmN0aW9uKGFyZzApIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoYXJnMCkgPT09IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmV0O1xufTtcbjtcbm1vZHVsZS5leHBvcnRzLl9fd2JpbmRnZW5fc3RyaW5nX2dldCA9IGZ1bmN0aW9uKGFyZzAsIGFyZzEpIHtcbiAgICBpZiAod2FzbSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ0aWt0b2tlbjogV0FTTSBiaW5hcnkgaGFzIG5vdCBiZWVuIHByb3BlcnkgaW5pdGlhbGl6ZWQuXCIpO1xuICAgIGNvbnN0IG9iaiA9IGdldE9iamVjdChhcmcxKTtcbiAgICBjb25zdCByZXQgPSB0eXBlb2Yob2JqKSA9PT0gJ3N0cmluZycgPyBvYmogOiB1bmRlZmluZWQ7XG4gICAgdmFyIHB0cjEgPSBpc0xpa2VOb25lKHJldCkgPyAwIDogcGFzc1N0cmluZ1RvV2FzbTAocmV0LCB3YXNtLl9fd2JpbmRnZW5fZXhwb3J0XzAsIHdhc20uX193YmluZGdlbl9leHBvcnRfMSk7XG4gICAgdmFyIGxlbjEgPSBXQVNNX1ZFQ1RPUl9MRU47XG4gICAgZ2V0RGF0YVZpZXdNZW1vcnkwKCkuc2V0SW50MzIoYXJnMCArIDQgKiAxLCBsZW4xLCB0cnVlKTtcbiAgICBnZXREYXRhVmlld01lbW9yeTAoKS5zZXRJbnQzMihhcmcwICsgNCAqIDAsIHB0cjEsIHRydWUpO1xufTtcbjtcbm1vZHVsZS5leHBvcnRzLl9fd2JpbmRnZW5fZXJyb3JfbmV3ID0gZnVuY3Rpb24oYXJnMCwgYXJnMSkge1xuICAgIGNvbnN0IHJldCA9IG5ldyBFcnJvcihnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuO1xubW9kdWxlLmV4cG9ydHMuX193YmdfcGFyc2VfNTIyMDJmMTE3ZWM5ZWNmYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBoYW5kbGVFcnJvcihmdW5jdGlvbiAoYXJnMCwgYXJnMSkge1xuICAgICAgICBjb25zdCByZXQgPSBKU09OLnBhcnNlKGdldFN0cmluZ0Zyb21XYXNtMChhcmcwLCBhcmcxKSk7XG4gICAgICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG4gICAgfSwgYXJndW1lbnRzKSB9O1xuO1xubW9kdWxlLmV4cG9ydHMuX193Ymdfc3RyaW5naWZ5X2JiZjQ1NDI2YzkyYTZiZjUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IoZnVuY3Rpb24gKGFyZzApIHtcbiAgICAgICAgY29uc3QgcmV0ID0gSlNPTi5zdHJpbmdpZnkoZ2V0T2JqZWN0KGFyZzApKTtcbiAgICAgICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbiAgICB9LCBhcmd1bWVudHMpIH07XG47XG5tb2R1bGUuZXhwb3J0cy5fX3diaW5kZ2VuX3Rocm93ID0gZnVuY3Rpb24oYXJnMCwgYXJnMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xufTtcbjtcblxuIl0sIm5hbWVzIjpbIndhc20iLCJtb2R1bGUiLCJleHBvcnRzIiwiX193Ymdfc2V0X3dhc20iLCJ2YWwiLCJoZWFwIiwiQXJyYXkiLCJmaWxsIiwidW5kZWZpbmVkIiwicHVzaCIsImdldE9iamVjdCIsImlkeCIsImhlYXBfbmV4dCIsImxlbmd0aCIsImRyb3BPYmplY3QiLCJ0YWtlT2JqZWN0IiwicmV0IiwiV0FTTV9WRUNUT1JfTEVOIiwiY2FjaGVkVWludDhBcnJheU1lbW9yeTAiLCJnZXRVaW50OEFycmF5TWVtb3J5MCIsImJ5dGVMZW5ndGgiLCJVaW50OEFycmF5IiwibWVtb3J5IiwiYnVmZmVyIiwibFRleHRFbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJyZXF1aXJlIiwiY2FjaGVkVGV4dEVuY29kZXIiLCJlbmNvZGVTdHJpbmciLCJlbmNvZGVJbnRvIiwiYXJnIiwidmlldyIsImJ1ZiIsImVuY29kZSIsInNldCIsInJlYWQiLCJ3cml0dGVuIiwicGFzc1N0cmluZ1RvV2FzbTAiLCJtYWxsb2MiLCJyZWFsbG9jIiwicHRyIiwic3ViYXJyYXkiLCJsZW4iLCJtZW0iLCJvZmZzZXQiLCJjb2RlIiwiY2hhckNvZGVBdCIsInNsaWNlIiwiaXNMaWtlTm9uZSIsIngiLCJjYWNoZWREYXRhVmlld01lbW9yeTAiLCJnZXREYXRhVmlld01lbW9yeTAiLCJkZXRhY2hlZCIsIkRhdGFWaWV3IiwibFRleHREZWNvZGVyIiwiVGV4dERlY29kZXIiLCJjYWNoZWRUZXh0RGVjb2RlciIsImlnbm9yZUJPTSIsImZhdGFsIiwiZGVjb2RlIiwiZ2V0U3RyaW5nRnJvbVdhc20wIiwiYWRkSGVhcE9iamVjdCIsIm9iaiIsImNhY2hlZFVpbnQzMkFycmF5TWVtb3J5MCIsImdldFVpbnQzMkFycmF5TWVtb3J5MCIsIlVpbnQzMkFycmF5IiwiZ2V0QXJyYXlVMzJGcm9tV2FzbTAiLCJwYXNzQXJyYXk4VG9XYXNtMCIsInBhc3NBcnJheTMyVG9XYXNtMCIsImdldEFycmF5VThGcm9tV2FzbTAiLCJnZXRfZW5jb2RpbmciLCJlbmNvZGluZyIsImV4dGVuZF9zcGVjaWFsX3Rva2VucyIsIkVycm9yIiwicmV0cHRyIiwiX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlciIsInB0cjAiLCJfX3diaW5kZ2VuX2V4cG9ydF8wIiwiX193YmluZGdlbl9leHBvcnRfMSIsImxlbjAiLCJyMCIsImdldEludDMyIiwicjEiLCJyMiIsIlRpa3Rva2VuIiwiX193cmFwIiwiZW5jb2RpbmdfZm9yX21vZGVsIiwibW9kZWwiLCJoYW5kbGVFcnJvciIsImYiLCJhcmdzIiwiYXBwbHkiLCJlIiwiX193YmluZGdlbl9leHBvcnRfMyIsIlRpa3Rva2VuRmluYWxpemF0aW9uIiwiRmluYWxpemF0aW9uUmVnaXN0cnkiLCJyZWdpc3RlciIsInVucmVnaXN0ZXIiLCJfX3diZ190aWt0b2tlbl9mcmVlIiwiY29uc3RydWN0b3IiLCJ0aWt0b2tlbl9iZmUiLCJzcGVjaWFsX3Rva2VucyIsInBhdF9zdHIiLCJwdHIxIiwibGVuMSIsInRpa3Rva2VuX25ldyIsIl9fd2JnX3B0ciIsIm5hbWUiLCJ0aWt0b2tlbl9uYW1lIiwidjEiLCJfX3diaW5kZ2VuX2V4cG9ydF8yIiwiT2JqZWN0IiwiY3JlYXRlIiwicHJvdG90eXBlIiwiX19kZXN0cm95X2ludG9fcmF3IiwiZnJlZSIsInRleHQiLCJhbGxvd2VkX3NwZWNpYWwiLCJkaXNhbGxvd2VkX3NwZWNpYWwiLCJ0aWt0b2tlbl9lbmNvZGUiLCJyMyIsInYyIiwiZW5jb2RlX29yZGluYXJ5IiwidGlrdG9rZW5fZW5jb2RlX29yZGluYXJ5IiwiZW5jb2RlX3dpdGhfdW5zdGFibGUiLCJ0aWt0b2tlbl9lbmNvZGVfd2l0aF91bnN0YWJsZSIsImVuY29kZV9zaW5nbGVfdG9rZW4iLCJieXRlcyIsInRpa3Rva2VuX2VuY29kZV9zaW5nbGVfdG9rZW4iLCJ0b2tlbnMiLCJ0aWt0b2tlbl9kZWNvZGUiLCJkZWNvZGVfc2luZ2xlX3Rva2VuX2J5dGVzIiwidG9rZW4iLCJ0aWt0b2tlbl9kZWNvZGVfc2luZ2xlX3Rva2VuX2J5dGVzIiwidG9rZW5fYnl0ZV92YWx1ZXMiLCJ0aWt0b2tlbl90b2tlbl9ieXRlX3ZhbHVlcyIsIl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmIiwiYXJnMCIsIl9fd2JpbmRnZW5faXNfdW5kZWZpbmVkIiwiX193YmluZGdlbl9zdHJpbmdfZ2V0IiwiYXJnMSIsInNldEludDMyIiwiX193YmluZGdlbl9lcnJvcl9uZXciLCJfX3diZ19wYXJzZV81MjIwMmYxMTdlYzllY2ZhIiwiSlNPTiIsInBhcnNlIiwiYXJndW1lbnRzIiwiX193Ymdfc3RyaW5naWZ5X2JiZjQ1NDI2YzkyYTZiZjUiLCJzdHJpbmdpZnkiLCJfX3diaW5kZ2VuX3Rocm93Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/tiktoken/tiktoken_bg.cjs\n");

/***/ })

};
;